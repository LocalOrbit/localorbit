<div class="tab-header stickable">
  <div class="l-constraint">
    <h1><i class="font-icon" data-icon="&#xe025;"></i>&nbsp; User Event Log</h1>
  </div>
</div>

  <table class="sortable">
    <thead class="stickable">
      <tr>
        <th data-column="date" class="<%= column_sort_classes("date") %>">Event Date</th>
        <th data-column="market" class="<%= column_sort_classes("market") %>">Market</th>
        <th data-column="type" class="<%= column_sort_classes("type") %>">Event Type</th>
        <th data-column="user" class="<%= column_sort_classes("user") %>">User</th>
        <th data-column="details" class="<%= column_sort_classes("details") %>">Details</th>
        <th data-column="ip" class="<%= column_sort_classes("ip") %>">IP Address</th>
      </tr>
    </thead>
    <% @activities.each do |activity| %>
      <tr class="product-row <%= cycle "odd", "even" %>">
        <td class="date"><%= activity.created_at %></td>
        <td class="market"><%= activity.associated.try(:name) %></td>
        <td class="type"><%= activity.auditable_type %> <%= activity.action %></td>
        <td class="user">
          <%= link_to_if activity.user, activity.user_name_or_email, [:admin, activity.user] %>
        </td>
        <td class="details">
          <%= activity.comment %><br>
          <%= activity.audited_changes %>
        </td>
        <td class="ip"><%= activity.remote_address %></td>
      </tr>
    <% end %>
  </table>


<%= paginate @activities %>

<% if @activities.none? %>
  <div class="info-note">
    <h2>No Results</h2>
    This table is empty, either because there is no data, or because the filter you've applied is hiding it.
  </div>
<% end %>
