<div class="tab-header stickable">
  <div class="l-constraint">
    <h1>Review Orders</h1>
    <p>This is a list of all orders made in your market.</p>

    <%= render "filters" %>
  </div>
</div>
<div class="table-wrapper">
  <table class="sortable">
    <thead class="stickable">
      <%= content_tag :th, sort_link(@q, :order_number, "Order #") %>
      <%= content_tag :th, sort_link(@q, :placed_at, "Order Date") %>
      <%= content_tag :th, sort_link(@q, :total_cost, "Amount") %>
      <th>Delivery</th>
      <%= content_tag :th, sort_link(@q, :payment_status, "Buyer") %>
      <th>Seller</th>
    </thead>
    <tbody>
      <% @orders.each do |order| %>
      <tr class="order-row">
        <td class="order-number">
          <%= link_to order.order_number, admin_order_path(order) %>
        </td>
        <td class="order-date"><%= order.placed_at.strftime("%m/%d/%Y") %></td>
        <td class="amount-owed"><%= number_to_currency(SellerOrder.new(order, current_user).gross_total) %></td>
        <td class="delivery-status"><%= order.delivery_status_for_user(current_user).titleize %></td>
        <td class="buyer-status"><%= order.payment_status.titleize %></td>
        <td class="seller-status"></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= paginate @orders %>
<%= render "shared/total_sales", totals: @totals %>
