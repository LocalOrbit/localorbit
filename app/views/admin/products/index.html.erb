<% svg = "<svg class='icon' width='100%' height='100%' viewBox='0 0 513 395' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'>
        <path d='M237.816115,36.6541111 L197.922377,78.7431616 L40.4270465,78.7431616 L40.2069509,355.476693 L394.699128,355.818123 L394.730167,236.791553 L432.885715,217.846401 L432.97601,394.066788 L1.31775185,394.255844 L0.753404161,40.1953928 L237.816115,36.6541111 Z M198.023963,198.503381 C144.162619,237.172479 81.6272494,313.940703 81.6272494,313.940703 C81.6272494,313.940703 102.812873,165.934885 179.194502,119.790994 C255.576132,73.6471038 335.724795,78.683905 335.724795,78.683905 L336.478199,0.70516348 L512.255573,119.790991 L336.348399,235.719292 L336.537456,159.834281 C336.537456,159.834281 251.885306,159.834283 198.023963,198.503381 Z'></path>
    </g>
</svg>" %>

<%= link_to "#{svg} Export CSV".html_safe, coming_soon_dashboard_path, class: "export todo pull-right" %>
<h1><i class="font-icon" data-icon="&#xe01f;"></i>&nbsp; Products</h1>

<div class="row row--justified">
  <div class="column">
    <select><option>Show from all Markets</option></select>
    <select><option>Show from all Sellers</option></select>
  </div>

  <div class="column">
    <input type="search" disabled><button type="submit" class="btn btn--end">Search</button>
    <%= link_to "Add New Product", new_admin_product_path, class: "btn btn--add btn--small" %>
  </div>
</div>

<table class="product-table product-table--admin sortable">
  <thead>
    <tr>
      <%= content_tag(:th, 'Seller') if current_user.multi_organization_membership? %>
      <%= content_tag(:th, 'Market') if current_user.multi_market_membership? %>
      <th>Name</th>
      <th>Pricing</th>
      <th>InÂ Stock</th>
      <th></th>
    </tr>
  </thead>
<% @products.each do |product| %>
  <tr class="product-row <%= cycle "odd", "even" %>">
    <%= content_tag(:td, link_to(product.organization_name, [:admin, product.organization]), class: 'seller') if current_user.multi_organization_membership? %>
    <%= content_tag(:td, link_to(product.market_name, [:admin, product.organization.markets.first]), class: 'market') if current_user.multi_market_membership? %>
    <td class="name product-name"><%= link_to product.name, [:admin, product] %></td>
    <td class="pricing">
      <ul class="l-inline-list">
        <% product.prices.view_sorted.decorate.each do |price| %>
        <%= content_tag(:li, link_to(price.quick_info, [:admin, product, :prices], class: 'edit-toggle')) %>
        <% end %>
      </ul>
    </td>
    <td class="stock">
      <%= link_to product.available_inventory, [:admin, product, :lots], class: "edit-toggle" %>
    </td>
    <td class="delete"><%= link_to raw('<i class="font-icon icon-delete"></i> Delete'), [:admin, product], method: :delete, data: { confirm: "Are you sure you want to delete this product?" } %></td>
  </tr>
<% end %>
</table>

<%= paginate @products %>
