<%= render "admin/markets/header" %>

<%= render "shared/errors", resource: @market %>

<div class="row row--partial">
  <%= form_for @market, url: [:admin, @market, :style_chooser], html: { class: "column column--two-thirds" } do |f| %>
    <fieldset>
      <legend>Style Chooser</legend>
      <div class="field">
        <%= f.label :text_color %><br>
        <%= f.color_field :text_color %>
      </div>
      <div class="field">
        <%= f.label :background_color %><br>
        <%= f.color_field :background_color %>
        <br>
      </div>
      <div class="field">
        <div class="color-picker">
          <span class="spectrum"></span>
          <input type="range" min="0" max="359" step="1">
        </div>
      </div>
      <div class="field ">
        <%= f.label :background_image %><br>

        <% background_options.each do |background| %>
          <%= cycle '<div class="row row--squash">'.html_safe, '','', name: "open_row" -%>
            <label class="column column--guttered column--third background-choice">
              <%= image_tag "backgrounds/#{background[1]}", alt: background[0] %><br>
              <%= f.radio_button :background_image, background[1], {:checked => (current_market.background_image == background[1] ? "checked" : false)} %> <%= background[0] %>
            </label>
          <%= cycle '', '', '</div>'.html_safe, name: "close_row" -%>
        <%- end -%>
        <div class="row row--squash">
          <label class="column column--guttered column--third">
            <div class="background_swatch" id="background_swatch"></div>
            <%= f.radio_button :background_image, "", {:checked => (current_market.background_image.blank? ? "checked" : false)} %> Solid Color
          </label>
        </div>
      </div>
    </fieldset>

    <div class="form-actions">
      <%= f.submit "Update Styles" %>
    </div>
  <% end %>
</div>
